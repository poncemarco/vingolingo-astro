/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:Zt,setPrototypeOf:Pt,isFrozen:Sn,getPrototypeOf:yn,getOwnPropertyDescriptor:Mn}=Object;let{freeze:H,seal:G,create:Qt}=Object,{apply:nt,construct:st}=typeof Reflect<"u"&&Reflect;H||(H=function(e){return e});G||(G=function(e){return e});nt||(nt=function(e,s,r){return e.apply(s,r)});st||(st=function(e,s){return new e(...s)});const De=z(Array.prototype.forEach),Rn=z(Array.prototype.lastIndexOf),Ft=z(Array.prototype.pop),_e=z(Array.prototype.push),Ln=z(Array.prototype.splice),Pe=z(String.prototype.toLowerCase),Ve=z(String.prototype.toString),Ut=z(String.prototype.match),Te=z(String.prototype.replace),In=z(String.prototype.indexOf),xn=z(String.prototype.trim),j=z(Object.prototype.hasOwnProperty),U=z(RegExp.prototype.test),Ae=wn(TypeError);function z(n){return function(e){for(var s=arguments.length,r=new Array(s>1?s-1:0),i=1;i<s;i++)r[i-1]=arguments[i];return nt(n,e,r)}}function wn(n){return function(){for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];return st(n,s)}}function _(n,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pe;Pt&&Pt(n,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=s(i);o!==i&&(Sn(e)||(e[r]=o),i=o)}n[i]=!0}return n}function On(n){for(let e=0;e<n.length;e++)j(n,e)||(n[e]=null);return n}function re(n){const e=Qt(null);for(const[s,r]of Zt(n))j(n,s)&&(Array.isArray(r)?e[s]=On(r):r&&typeof r=="object"&&r.constructor===Object?e[s]=re(r):e[s]=r);return e}function Se(n,e){for(;n!==null;){const r=Mn(n,e);if(r){if(r.get)return z(r.get);if(typeof r.value=="function")return z(r.value)}n=yn(n)}function s(){return null}return s}const Ht=H(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ze=H(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Qe=H(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),bn=H(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qe=H(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Nn=H(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zt=H(["#text"]),$t=H(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Je=H(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Bt=H(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ve=H(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Cn=G(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Dn=G(/<%[\w\W]*|[\w\W]*%>/gm),vn=G(/\$\{[\w\W]*/gm),kn=G(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pn=G(/^aria-[\-\w]+$/),qt=G(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Fn=G(/^(?:\w+script|data):/i),Un=G(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Jt=G(/^html$/i),Hn=G(/^[a-z][.\w]*(-[.\w]+)+$/i);var Wt=Object.freeze({__proto__:null,ARIA_ATTR:Pn,ATTR_WHITESPACE:Un,CUSTOM_ELEMENT:Hn,DATA_ATTR:kn,DOCTYPE_NAME:Jt,ERB_EXPR:Dn,IS_ALLOWED_URI:qt,IS_SCRIPT_OR_DATA:Fn,MUSTACHE_EXPR:Cn,TMPLIT_EXPR:vn});const ye={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},zn=function(){return typeof window>"u"?null:window},$n=function(e,s){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";s&&s.hasAttribute(i)&&(r=s.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},Gt=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function en(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zn();const e=p=>en(p);if(e.version="3.2.4",e.removed=[],!n||!n.document||n.document.nodeType!==ye.document||!n.Element)return e.isSupported=!1,e;let{document:s}=n;const r=s,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:f,NamedNodeMap:d=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:g,DOMParser:E,trustedTypes:A}=n,S=u.prototype,I=Se(S,"cloneNode"),T=Se(S,"remove"),y=Se(S,"nextSibling"),k=Se(S,"childNodes"),$=Se(S,"parentNode");if(typeof a=="function"){const p=s.createElement("template");p.content&&p.content.ownerDocument&&(s=p.content.ownerDocument)}let R,q="";const{implementation:D,createNodeIterator:b,createDocumentFragment:Y,getElementsByTagName:K}=s,{importNode:Me}=r;let x=Gt();e.isSupported=typeof Zt=="function"&&typeof $=="function"&&D&&D.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:X,ERB_EXPR:Re,TMPLIT_EXPR:P,DATA_ATTR:ae,ARIA_ATTR:Le,IS_SCRIPT_OR_DATA:fn,ATTR_WHITESPACE:ft,CUSTOM_ELEMENT:hn}=Wt;let{IS_ALLOWED_URI:ht}=Wt,w=null;const dt=_({},[...Ht,...Ze,...Qe,...qe,...zt]);let N=null;const pt=_({},[...$t,...Je,...Bt,...ve]);let L=Object.seal(Qt(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,Ue=null,mt=!0,He=!0,gt=!1,Et=!0,ce=!1,ze=!0,se=!1,$e=!1,Be=!1,le=!1,Ie=!1,xe=!1,_t=!0,Tt=!1;const dn="user-content-";let We=!0,me=!1,ue={},fe=null;const At=_({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let St=null;const yt=_({},["audio","video","img","source","image","track"]);let Ge=null;const Mt=_({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),we="http://www.w3.org/1998/Math/MathML",Oe="http://www.w3.org/2000/svg",J="http://www.w3.org/1999/xhtml";let he=J,je=!1,Ye=null;const pn=_({},[we,Oe,J],Ve);let be=_({},["mi","mo","mn","ms","mtext"]),Ne=_({},["annotation-xml"]);const mn=_({},["title","style","font","a","script"]);let ge=null;const gn=["application/xhtml+xml","text/html"],En="text/html";let O=null,de=null;const _n=s.createElement("form"),Rt=function(t){return t instanceof RegExp||t instanceof Function},Ke=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(de&&de===t)){if((!t||typeof t!="object")&&(t={}),t=re(t),ge=gn.indexOf(t.PARSER_MEDIA_TYPE)===-1?En:t.PARSER_MEDIA_TYPE,O=ge==="application/xhtml+xml"?Ve:Pe,w=j(t,"ALLOWED_TAGS")?_({},t.ALLOWED_TAGS,O):dt,N=j(t,"ALLOWED_ATTR")?_({},t.ALLOWED_ATTR,O):pt,Ye=j(t,"ALLOWED_NAMESPACES")?_({},t.ALLOWED_NAMESPACES,Ve):pn,Ge=j(t,"ADD_URI_SAFE_ATTR")?_(re(Mt),t.ADD_URI_SAFE_ATTR,O):Mt,St=j(t,"ADD_DATA_URI_TAGS")?_(re(yt),t.ADD_DATA_URI_TAGS,O):yt,fe=j(t,"FORBID_CONTENTS")?_({},t.FORBID_CONTENTS,O):At,pe=j(t,"FORBID_TAGS")?_({},t.FORBID_TAGS,O):{},Ue=j(t,"FORBID_ATTR")?_({},t.FORBID_ATTR,O):{},ue=j(t,"USE_PROFILES")?t.USE_PROFILES:!1,mt=t.ALLOW_ARIA_ATTR!==!1,He=t.ALLOW_DATA_ATTR!==!1,gt=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Et=t.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ce=t.SAFE_FOR_TEMPLATES||!1,ze=t.SAFE_FOR_XML!==!1,se=t.WHOLE_DOCUMENT||!1,le=t.RETURN_DOM||!1,Ie=t.RETURN_DOM_FRAGMENT||!1,xe=t.RETURN_TRUSTED_TYPE||!1,Be=t.FORCE_BODY||!1,_t=t.SANITIZE_DOM!==!1,Tt=t.SANITIZE_NAMED_PROPS||!1,We=t.KEEP_CONTENT!==!1,me=t.IN_PLACE||!1,ht=t.ALLOWED_URI_REGEXP||qt,he=t.NAMESPACE||J,be=t.MATHML_TEXT_INTEGRATION_POINTS||be,Ne=t.HTML_INTEGRATION_POINTS||Ne,L=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Rt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Rt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ce&&(He=!1),Ie&&(le=!0),ue&&(w=_({},zt),N=[],ue.html===!0&&(_(w,Ht),_(N,$t)),ue.svg===!0&&(_(w,Ze),_(N,Je),_(N,ve)),ue.svgFilters===!0&&(_(w,Qe),_(N,Je),_(N,ve)),ue.mathMl===!0&&(_(w,qe),_(N,Bt),_(N,ve))),t.ADD_TAGS&&(w===dt&&(w=re(w)),_(w,t.ADD_TAGS,O)),t.ADD_ATTR&&(N===pt&&(N=re(N)),_(N,t.ADD_ATTR,O)),t.ADD_URI_SAFE_ATTR&&_(Ge,t.ADD_URI_SAFE_ATTR,O),t.FORBID_CONTENTS&&(fe===At&&(fe=re(fe)),_(fe,t.FORBID_CONTENTS,O)),We&&(w["#text"]=!0),se&&_(w,["html","head","body"]),w.table&&(_(w,["tbody"]),delete pe.tbody),t.TRUSTED_TYPES_POLICY){if(typeof t.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof t.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ae('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=t.TRUSTED_TYPES_POLICY,q=R.createHTML("")}else R===void 0&&(R=$n(A,i)),R!==null&&typeof q=="string"&&(q=R.createHTML(""));H&&H(t),de=t}},Lt=_({},[...Ze,...Qe,...bn]),It=_({},[...qe,...Nn]),Tn=function(t){let c=$(t);(!c||!c.tagName)&&(c={namespaceURI:he,tagName:"template"});const h=Pe(t.tagName),M=Pe(c.tagName);return Ye[t.namespaceURI]?t.namespaceURI===Oe?c.namespaceURI===J?h==="svg":c.namespaceURI===we?h==="svg"&&(M==="annotation-xml"||be[M]):!!Lt[h]:t.namespaceURI===we?c.namespaceURI===J?h==="math":c.namespaceURI===Oe?h==="math"&&Ne[M]:!!It[h]:t.namespaceURI===J?c.namespaceURI===Oe&&!Ne[M]||c.namespaceURI===we&&!be[M]?!1:!It[h]&&(mn[h]||!Lt[h]):!!(ge==="application/xhtml+xml"&&Ye[t.namespaceURI]):!1},V=function(t){_e(e.removed,{element:t});try{$(t).removeChild(t)}catch{T(t)}},Ce=function(t,c){try{_e(e.removed,{attribute:c.getAttributeNode(t),from:c})}catch{_e(e.removed,{attribute:null,from:c})}if(c.removeAttribute(t),t==="is")if(le||Ie)try{V(c)}catch{}else try{c.setAttribute(t,"")}catch{}},xt=function(t){let c=null,h=null;if(Be)t="<remove></remove>"+t;else{const C=Ut(t,/^[\r\n\t ]+/);h=C&&C[0]}ge==="application/xhtml+xml"&&he===J&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const M=R?R.createHTML(t):t;if(he===J)try{c=new E().parseFromString(M,ge)}catch{}if(!c||!c.documentElement){c=D.createDocument(he,"template",null);try{c.documentElement.innerHTML=je?q:M}catch{}}const v=c.body||c.documentElement;return t&&h&&v.insertBefore(s.createTextNode(h),v.childNodes[0]||null),he===J?K.call(c,se?"html":"body")[0]:se?c.documentElement:v},wt=function(t){return b.call(t.ownerDocument||t,t,f.SHOW_ELEMENT|f.SHOW_COMMENT|f.SHOW_TEXT|f.SHOW_PROCESSING_INSTRUCTION|f.SHOW_CDATA_SECTION,null)},Xe=function(t){return t instanceof g&&(typeof t.nodeName!="string"||typeof t.textContent!="string"||typeof t.removeChild!="function"||!(t.attributes instanceof d)||typeof t.removeAttribute!="function"||typeof t.setAttribute!="function"||typeof t.namespaceURI!="string"||typeof t.insertBefore!="function"||typeof t.hasChildNodes!="function")},Ot=function(t){return typeof l=="function"&&t instanceof l};function ee(p,t,c){De(p,h=>{h.call(e,t,c,de)})}const bt=function(t){let c=null;if(ee(x.beforeSanitizeElements,t,null),Xe(t))return V(t),!0;const h=O(t.nodeName);if(ee(x.uponSanitizeElement,t,{tagName:h,allowedTags:w}),t.hasChildNodes()&&!Ot(t.firstElementChild)&&U(/<[/\w]/g,t.innerHTML)&&U(/<[/\w]/g,t.textContent)||t.nodeType===ye.progressingInstruction||ze&&t.nodeType===ye.comment&&U(/<[/\w]/g,t.data))return V(t),!0;if(!w[h]||pe[h]){if(!pe[h]&&Ct(h)&&(L.tagNameCheck instanceof RegExp&&U(L.tagNameCheck,h)||L.tagNameCheck instanceof Function&&L.tagNameCheck(h)))return!1;if(We&&!fe[h]){const M=$(t)||t.parentNode,v=k(t)||t.childNodes;if(v&&M){const C=v.length;for(let B=C-1;B>=0;--B){const Z=I(v[B],!0);Z.__removalCount=(t.__removalCount||0)+1,M.insertBefore(Z,y(t))}}}return V(t),!0}return t instanceof u&&!Tn(t)||(h==="noscript"||h==="noembed"||h==="noframes")&&U(/<\/no(script|embed|frames)/i,t.innerHTML)?(V(t),!0):(ce&&t.nodeType===ye.text&&(c=t.textContent,De([X,Re,P],M=>{c=Te(c,M," ")}),t.textContent!==c&&(_e(e.removed,{element:t.cloneNode()}),t.textContent=c)),ee(x.afterSanitizeElements,t,null),!1)},Nt=function(t,c,h){if(_t&&(c==="id"||c==="name")&&(h in s||h in _n))return!1;if(!(He&&!Ue[c]&&U(ae,c))){if(!(mt&&U(Le,c))){if(!N[c]||Ue[c]){if(!(Ct(t)&&(L.tagNameCheck instanceof RegExp&&U(L.tagNameCheck,t)||L.tagNameCheck instanceof Function&&L.tagNameCheck(t))&&(L.attributeNameCheck instanceof RegExp&&U(L.attributeNameCheck,c)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(c))||c==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&U(L.tagNameCheck,h)||L.tagNameCheck instanceof Function&&L.tagNameCheck(h))))return!1}else if(!Ge[c]){if(!U(ht,Te(h,ft,""))){if(!((c==="src"||c==="xlink:href"||c==="href")&&t!=="script"&&In(h,"data:")===0&&St[t])){if(!(gt&&!U(fn,Te(h,ft,"")))){if(h)return!1}}}}}}return!0},Ct=function(t){return t!=="annotation-xml"&&Ut(t,hn)},Dt=function(t){ee(x.beforeSanitizeAttributes,t,null);const{attributes:c}=t;if(!c||Xe(t))return;const h={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:N,forceKeepAttr:void 0};let M=c.length;for(;M--;){const v=c[M],{name:C,namespaceURI:B,value:Z}=v,Ee=O(C);let F=C==="value"?Z:xn(Z);if(h.attrName=Ee,h.attrValue=F,h.keepAttr=!0,h.forceKeepAttr=void 0,ee(x.uponSanitizeAttribute,t,h),F=h.attrValue,Tt&&(Ee==="id"||Ee==="name")&&(Ce(C,t),F=dn+F),ze&&U(/((--!?|])>)|<\/(style|title)/i,F)){Ce(C,t);continue}if(h.forceKeepAttr||(Ce(C,t),!h.keepAttr))continue;if(!Et&&U(/\/>/i,F)){Ce(C,t);continue}ce&&De([X,Re,P],kt=>{F=Te(F,kt," ")});const vt=O(t.nodeName);if(Nt(vt,Ee,F)){if(R&&typeof A=="object"&&typeof A.getAttributeType=="function"&&!B)switch(A.getAttributeType(vt,Ee)){case"TrustedHTML":{F=R.createHTML(F);break}case"TrustedScriptURL":{F=R.createScriptURL(F);break}}try{B?t.setAttributeNS(B,C,F):t.setAttribute(C,F),Xe(t)?V(t):Ft(e.removed)}catch{}}}ee(x.afterSanitizeAttributes,t,null)},An=function p(t){let c=null;const h=wt(t);for(ee(x.beforeSanitizeShadowDOM,t,null);c=h.nextNode();)ee(x.uponSanitizeShadowNode,c,null),bt(c),Dt(c),c.content instanceof o&&p(c.content);ee(x.afterSanitizeShadowDOM,t,null)};return e.sanitize=function(p){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=null,h=null,M=null,v=null;if(je=!p,je&&(p="<!-->"),typeof p!="string"&&!Ot(p))if(typeof p.toString=="function"){if(p=p.toString(),typeof p!="string")throw Ae("dirty is not a string, aborting")}else throw Ae("toString is not a function");if(!e.isSupported)return p;if($e||Ke(t),e.removed=[],typeof p=="string"&&(me=!1),me){if(p.nodeName){const Z=O(p.nodeName);if(!w[Z]||pe[Z])throw Ae("root node is forbidden and cannot be sanitized in-place")}}else if(p instanceof l)c=xt("<!---->"),h=c.ownerDocument.importNode(p,!0),h.nodeType===ye.element&&h.nodeName==="BODY"||h.nodeName==="HTML"?c=h:c.appendChild(h);else{if(!le&&!ce&&!se&&p.indexOf("<")===-1)return R&&xe?R.createHTML(p):p;if(c=xt(p),!c)return le?null:xe?q:""}c&&Be&&V(c.firstChild);const C=wt(me?p:c);for(;M=C.nextNode();)bt(M),Dt(M),M.content instanceof o&&An(M.content);if(me)return p;if(le){if(Ie)for(v=Y.call(c.ownerDocument);c.firstChild;)v.appendChild(c.firstChild);else v=c;return(N.shadowroot||N.shadowrootmode)&&(v=Me.call(r,v,!0)),v}let B=se?c.outerHTML:c.innerHTML;return se&&w["!doctype"]&&c.ownerDocument&&c.ownerDocument.doctype&&c.ownerDocument.doctype.name&&U(Jt,c.ownerDocument.doctype.name)&&(B="<!DOCTYPE "+c.ownerDocument.doctype.name+`>
`+B),ce&&De([X,Re,P],Z=>{B=Te(B,Z," ")}),R&&xe?R.createHTML(B):B},e.setConfig=function(){let p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ke(p),$e=!0},e.clearConfig=function(){de=null,$e=!1},e.isValidAttribute=function(p,t,c){de||Ke({});const h=O(p),M=O(t);return Nt(h,M,c)},e.addHook=function(p,t){typeof t=="function"&&_e(x[p],t)},e.removeHook=function(p,t){if(t!==void 0){const c=Rn(x[p],t);return c===-1?void 0:Ln(x[p],c,1)[0]}return Ft(x[p])},e.removeHooks=function(p){x[p]=[]},e.removeAllHooks=function(){x=Gt()},e}var et=en();function te(n){return Array.isArray?Array.isArray(n):sn(n)==="[object Array]"}const Bn=1/0;function Wn(n){if(typeof n=="string")return n;let e=n+"";return e=="0"&&1/n==-Bn?"-0":e}function Gn(n){return n==null?"":Wn(n)}function Q(n){return typeof n=="string"}function tn(n){return typeof n=="number"}function jn(n){return n===!0||n===!1||Yn(n)&&sn(n)=="[object Boolean]"}function nn(n){return typeof n=="object"}function Yn(n){return nn(n)&&n!==null}function W(n){return n!=null}function tt(n){return!n.trim().length}function sn(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}const Kn="Incorrect 'index' type",Xn=n=>`Invalid value for key ${n}`,Vn=n=>`Pattern length exceeds max of ${n}.`,Zn=n=>`Missing ${n} property in key`,Qn=n=>`Property 'weight' in key '${n}' must be a positive integer`,jt=Object.prototype.hasOwnProperty;class qn{constructor(e){this._keys=[],this._keyMap={};let s=0;e.forEach(r=>{let i=rn(r);this._keys.push(i),this._keyMap[i.id]=i,s+=i.weight}),this._keys.forEach(r=>{r.weight/=s})}get(e){return this._keyMap[e]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function rn(n){let e=null,s=null,r=null,i=1,o=null;if(Q(n)||te(n))r=n,e=Yt(n),s=rt(n);else{if(!jt.call(n,"name"))throw new Error(Zn("name"));const a=n.name;if(r=a,jt.call(n,"weight")&&(i=n.weight,i<=0))throw new Error(Qn(a));e=Yt(a),s=rt(a),o=n.getFn}return{path:e,id:s,weight:i,src:r,getFn:o}}function Yt(n){return te(n)?n:n.split(".")}function rt(n){return te(n)?n.join("."):n}function Jn(n,e){let s=[],r=!1;const i=(o,a,l)=>{if(W(o))if(!a[l])s.push(o);else{let u=a[l];const f=o[u];if(!W(f))return;if(l===a.length-1&&(Q(f)||tn(f)||jn(f)))s.push(Gn(f));else if(te(f)){r=!0;for(let d=0,g=f.length;d<g;d+=1)i(f[d],a,l+1)}else a.length&&i(f,a,l+1)}};return i(n,Q(e)?e.split("."):e,0),r?s:s[0]}const es={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},ts={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(n,e)=>n.score===e.score?n.idx<e.idx?-1:1:n.score<e.score?-1:1},ns={location:0,threshold:.6,distance:100},ss={useExtendedSearch:!1,getFn:Jn,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var m={...ts,...es,...ns,...ss};const rs=/[^ ]+/g;function is(n=1,e=3){const s=new Map,r=Math.pow(10,e);return{get(i){const o=i.match(rs).length;if(s.has(o))return s.get(o);const a=1/Math.pow(o,.5*n),l=parseFloat(Math.round(a*r)/r);return s.set(o,l),l},clear(){s.clear()}}}class ut{constructor({getFn:e=m.getFn,fieldNormWeight:s=m.fieldNormWeight}={}){this.norm=is(s,3),this.getFn=e,this.isCreated=!1,this.setIndexRecords()}setSources(e=[]){this.docs=e}setIndexRecords(e=[]){this.records=e}setKeys(e=[]){this.keys=e,this._keysMap={},e.forEach((s,r)=>{this._keysMap[s.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((e,s)=>{this._addString(e,s)}):this.docs.forEach((e,s)=>{this._addObject(e,s)}),this.norm.clear())}add(e){const s=this.size();Q(e)?this._addString(e,s):this._addObject(e,s)}removeAt(e){this.records.splice(e,1);for(let s=e,r=this.size();s<r;s+=1)this.records[s].i-=1}getValueForItemAtKeyId(e,s){return e[this._keysMap[s]]}size(){return this.records.length}_addString(e,s){if(!W(e)||tt(e))return;let r={v:e,i:s,n:this.norm.get(e)};this.records.push(r)}_addObject(e,s){let r={i:s,$:{}};this.keys.forEach((i,o)=>{let a=i.getFn?i.getFn(e):this.getFn(e,i.path);if(W(a)){if(te(a)){let l=[];const u=[{nestedArrIndex:-1,value:a}];for(;u.length;){const{nestedArrIndex:f,value:d}=u.pop();if(W(d))if(Q(d)&&!tt(d)){let g={v:d,i:f,n:this.norm.get(d)};l.push(g)}else te(d)&&d.forEach((g,E)=>{u.push({nestedArrIndex:E,value:g})})}r.$[o]=l}else if(Q(a)&&!tt(a)){let l={v:a,n:this.norm.get(a)};r.$[o]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function on(n,e,{getFn:s=m.getFn,fieldNormWeight:r=m.fieldNormWeight}={}){const i=new ut({getFn:s,fieldNormWeight:r});return i.setKeys(n.map(rn)),i.setSources(e),i.create(),i}function os(n,{getFn:e=m.getFn,fieldNormWeight:s=m.fieldNormWeight}={}){const{keys:r,records:i}=n,o=new ut({getFn:e,fieldNormWeight:s});return o.setKeys(r),o.setIndexRecords(i),o}function ke(n,{errors:e=0,currentLocation:s=0,expectedLocation:r=0,distance:i=m.distance,ignoreLocation:o=m.ignoreLocation}={}){const a=e/n.length;if(o)return a;const l=Math.abs(r-s);return i?a+l/i:l?1:a}function as(n=[],e=m.minMatchCharLength){let s=[],r=-1,i=-1,o=0;for(let a=n.length;o<a;o+=1){let l=n[o];l&&r===-1?r=o:!l&&r!==-1&&(i=o-1,i-r+1>=e&&s.push([r,i]),r=-1)}return n[o-1]&&o-r>=e&&s.push([r,o-1]),s}const ie=32;function cs(n,e,s,{location:r=m.location,distance:i=m.distance,threshold:o=m.threshold,findAllMatches:a=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,includeMatches:u=m.includeMatches,ignoreLocation:f=m.ignoreLocation}={}){if(e.length>ie)throw new Error(Vn(ie));const d=e.length,g=n.length,E=Math.max(0,Math.min(r,g));let A=o,S=E;const I=l>1||u,T=I?Array(g):[];let y;for(;(y=n.indexOf(e,S))>-1;){let b=ke(e,{currentLocation:y,expectedLocation:E,distance:i,ignoreLocation:f});if(A=Math.min(b,A),S=y+d,I){let Y=0;for(;Y<d;)T[y+Y]=1,Y+=1}}S=-1;let k=[],$=1,R=d+g;const q=1<<d-1;for(let b=0;b<d;b+=1){let Y=0,K=R;for(;Y<K;)ke(e,{errors:b,currentLocation:E+K,expectedLocation:E,distance:i,ignoreLocation:f})<=A?Y=K:R=K,K=Math.floor((R-Y)/2+Y);R=K;let Me=Math.max(1,E-K+1),x=a?g:Math.min(E+K,g)+d,X=Array(x+2);X[x+1]=(1<<b)-1;for(let P=x;P>=Me;P-=1){let ae=P-1,Le=s[n.charAt(ae)];if(I&&(T[ae]=+!!Le),X[P]=(X[P+1]<<1|1)&Le,b&&(X[P]|=(k[P+1]|k[P])<<1|1|k[P+1]),X[P]&q&&($=ke(e,{errors:b,currentLocation:ae,expectedLocation:E,distance:i,ignoreLocation:f}),$<=A)){if(A=$,S=ae,S<=E)break;Me=Math.max(1,2*E-S)}}if(ke(e,{errors:b+1,currentLocation:E,expectedLocation:E,distance:i,ignoreLocation:f})>A)break;k=X}const D={isMatch:S>=0,score:Math.max(.001,$)};if(I){const b=as(T,l);b.length?u&&(D.indices=b):D.isMatch=!1}return D}function ls(n){let e={};for(let s=0,r=n.length;s<r;s+=1){const i=n.charAt(s);e[i]=(e[i]||0)|1<<r-s-1}return e}class an{constructor(e,{location:s=m.location,threshold:r=m.threshold,distance:i=m.distance,includeMatches:o=m.includeMatches,findAllMatches:a=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,isCaseSensitive:u=m.isCaseSensitive,ignoreLocation:f=m.ignoreLocation}={}){if(this.options={location:s,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:f},this.pattern=u?e:e.toLowerCase(),this.chunks=[],!this.pattern.length)return;const d=(E,A)=>{this.chunks.push({pattern:E,alphabet:ls(E),startIndex:A})},g=this.pattern.length;if(g>ie){let E=0;const A=g%ie,S=g-A;for(;E<S;)d(this.pattern.substr(E,ie),E),E+=ie;if(A){const I=g-ie;d(this.pattern.substr(I),I)}}else d(this.pattern,0)}searchIn(e){const{isCaseSensitive:s,includeMatches:r}=this.options;if(s||(e=e.toLowerCase()),this.pattern===e){let S={isMatch:!0,score:0};return r&&(S.indices=[[0,e.length-1]]),S}const{location:i,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,ignoreLocation:f}=this.options;let d=[],g=0,E=!1;this.chunks.forEach(({pattern:S,alphabet:I,startIndex:T})=>{const{isMatch:y,score:k,indices:$}=cs(e,S,I,{location:i+T,distance:o,threshold:a,findAllMatches:l,minMatchCharLength:u,includeMatches:r,ignoreLocation:f});y&&(E=!0),g+=k,y&&$&&(d=[...d,...$])});let A={isMatch:E,score:E?g/this.chunks.length:1};return E&&r&&(A.indices=d),A}}class ne{constructor(e){this.pattern=e}static isMultiMatch(e){return Kt(e,this.multiRegex)}static isSingleMatch(e){return Kt(e,this.singleRegex)}search(){}}function Kt(n,e){const s=n.match(e);return s?s[1]:null}class us extends ne{constructor(e){super(e)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(e){const s=e===this.pattern;return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class fs extends ne{constructor(e){super(e)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(e){const r=e.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,e.length-1]}}}class hs extends ne{constructor(e){super(e)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(e){const s=e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,this.pattern.length-1]}}}class ds extends ne{constructor(e){super(e)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(e){const s=!e.startsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class ps extends ne{constructor(e){super(e)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(e){const s=e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[e.length-this.pattern.length,e.length-1]}}}class ms extends ne{constructor(e){super(e)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(e){const s=!e.endsWith(this.pattern);return{isMatch:s,score:s?0:1,indices:[0,e.length-1]}}}class cn extends ne{constructor(e,{location:s=m.location,threshold:r=m.threshold,distance:i=m.distance,includeMatches:o=m.includeMatches,findAllMatches:a=m.findAllMatches,minMatchCharLength:l=m.minMatchCharLength,isCaseSensitive:u=m.isCaseSensitive,ignoreLocation:f=m.ignoreLocation}={}){super(e),this._bitapSearch=new an(e,{location:s,threshold:r,distance:i,includeMatches:o,findAllMatches:a,minMatchCharLength:l,isCaseSensitive:u,ignoreLocation:f})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(e){return this._bitapSearch.searchIn(e)}}class ln extends ne{constructor(e){super(e)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(e){let s=0,r;const i=[],o=this.pattern.length;for(;(r=e.indexOf(this.pattern,s))>-1;)s=r+o,i.push([r,s-1]);const a=!!i.length;return{isMatch:a,score:a?0:1,indices:i}}}const it=[us,ln,hs,ds,ms,ps,fs,cn],Xt=it.length,gs=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Es="|";function _s(n,e={}){return n.split(Es).map(s=>{let r=s.trim().split(gs).filter(o=>o&&!!o.trim()),i=[];for(let o=0,a=r.length;o<a;o+=1){const l=r[o];let u=!1,f=-1;for(;!u&&++f<Xt;){const d=it[f];let g=d.isMultiMatch(l);g&&(i.push(new d(g,e)),u=!0)}if(!u)for(f=-1;++f<Xt;){const d=it[f];let g=d.isSingleMatch(l);if(g){i.push(new d(g,e));break}}}return i})}const Ts=new Set([cn.type,ln.type]);class As{constructor(e,{isCaseSensitive:s=m.isCaseSensitive,includeMatches:r=m.includeMatches,minMatchCharLength:i=m.minMatchCharLength,ignoreLocation:o=m.ignoreLocation,findAllMatches:a=m.findAllMatches,location:l=m.location,threshold:u=m.threshold,distance:f=m.distance}={}){this.query=null,this.options={isCaseSensitive:s,includeMatches:r,minMatchCharLength:i,findAllMatches:a,ignoreLocation:o,location:l,threshold:u,distance:f},this.pattern=s?e:e.toLowerCase(),this.query=_s(this.pattern,this.options)}static condition(e,s){return s.useExtendedSearch}searchIn(e){const s=this.query;if(!s)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i}=this.options;e=i?e:e.toLowerCase();let o=0,a=[],l=0;for(let u=0,f=s.length;u<f;u+=1){const d=s[u];a.length=0,o=0;for(let g=0,E=d.length;g<E;g+=1){const A=d[g],{isMatch:S,indices:I,score:T}=A.search(e);if(S){if(o+=1,l+=T,r){const y=A.constructor.type;Ts.has(y)?a=[...a,...I]:a.push(I)}}else{l=0,o=0,a.length=0;break}}if(o){let g={isMatch:!0,score:l/o};return r&&(g.indices=a),g}}return{isMatch:!1,score:1}}}const ot=[];function Ss(...n){ot.push(...n)}function at(n,e){for(let s=0,r=ot.length;s<r;s+=1){let i=ot[s];if(i.condition(n,e))return new i(n,e)}return new an(n,e)}const Fe={AND:"$and",OR:"$or"},ct={PATH:"$path",PATTERN:"$val"},lt=n=>!!(n[Fe.AND]||n[Fe.OR]),ys=n=>!!n[ct.PATH],Ms=n=>!te(n)&&nn(n)&&!lt(n),Vt=n=>({[Fe.AND]:Object.keys(n).map(e=>({[e]:n[e]}))});function un(n,e,{auto:s=!0}={}){const r=i=>{let o=Object.keys(i);const a=ys(i);if(!a&&o.length>1&&!lt(i))return r(Vt(i));if(Ms(i)){const u=a?i[ct.PATH]:o[0],f=a?i[ct.PATTERN]:i[u];if(!Q(f))throw new Error(Xn(u));const d={keyId:rt(u),pattern:f};return s&&(d.searcher=at(f,e)),d}let l={children:[],operator:o[0]};return o.forEach(u=>{const f=i[u];te(f)&&f.forEach(d=>{l.children.push(r(d))})}),l};return lt(n)||(n=Vt(n)),r(n)}function Rs(n,{ignoreFieldNorm:e=m.ignoreFieldNorm}){n.forEach(s=>{let r=1;s.matches.forEach(({key:i,norm:o,score:a})=>{const l=i?i.weight:null;r*=Math.pow(a===0&&l?Number.EPSILON:a,(l||1)*(e?1:o))}),s.score=r})}function Ls(n,e){const s=n.matches;e.matches=[],W(s)&&s.forEach(r=>{if(!W(r.indices)||!r.indices.length)return;const{indices:i,value:o}=r;let a={indices:i,value:o};r.key&&(a.key=r.key.src),r.idx>-1&&(a.refIndex=r.idx),e.matches.push(a)})}function Is(n,e){e.score=n.score}function xs(n,e,{includeMatches:s=m.includeMatches,includeScore:r=m.includeScore}={}){const i=[];return s&&i.push(Ls),r&&i.push(Is),n.map(o=>{const{idx:a}=o,l={item:e[a],refIndex:a};return i.length&&i.forEach(u=>{u(o,l)}),l})}class oe{constructor(e,s={},r){this.options={...m,...s},this.options.useExtendedSearch,this._keyStore=new qn(this.options.keys),this.setCollection(e,r)}setCollection(e,s){if(this._docs=e,s&&!(s instanceof ut))throw new Error(Kn);this._myIndex=s||on(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(e){W(e)&&(this._docs.push(e),this._myIndex.add(e))}remove(e=()=>!1){const s=[];for(let r=0,i=this._docs.length;r<i;r+=1){const o=this._docs[r];e(o,r)&&(this.removeAt(r),r-=1,i-=1,s.push(o))}return s}removeAt(e){this._docs.splice(e,1),this._myIndex.removeAt(e)}getIndex(){return this._myIndex}search(e,{limit:s=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:o,sortFn:a,ignoreFieldNorm:l}=this.options;let u=Q(e)?Q(this._docs[0])?this._searchStringList(e):this._searchObjectList(e):this._searchLogical(e);return Rs(u,{ignoreFieldNorm:l}),o&&u.sort(a),tn(s)&&s>-1&&(u=u.slice(0,s)),xs(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(e){const s=at(e,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:o,i:a,n:l})=>{if(!W(o))return;const{isMatch:u,score:f,indices:d}=s.searchIn(o);u&&i.push({item:o,idx:a,matches:[{score:f,value:o,norm:l,indices:d}]})}),i}_searchLogical(e){const s=un(e,this.options),r=(l,u,f)=>{if(!l.children){const{keyId:g,searcher:E}=l,A=this._findMatches({key:this._keyStore.get(g),value:this._myIndex.getValueForItemAtKeyId(u,g),searcher:E});return A&&A.length?[{idx:f,item:u,matches:A}]:[]}const d=[];for(let g=0,E=l.children.length;g<E;g+=1){const A=l.children[g],S=r(A,u,f);if(S.length)d.push(...S);else if(l.operator===Fe.AND)return[]}return d},i=this._myIndex.records,o={},a=[];return i.forEach(({$:l,i:u})=>{if(W(l)){let f=r(s,l,u);f.length&&(o[u]||(o[u]={idx:u,item:l,matches:[]},a.push(o[u])),f.forEach(({matches:d})=>{o[u].matches.push(...d)}))}}),a}_searchObjectList(e){const s=at(e,this.options),{keys:r,records:i}=this._myIndex,o=[];return i.forEach(({$:a,i:l})=>{if(!W(a))return;let u=[];r.forEach((f,d)=>{u.push(...this._findMatches({key:f,value:a[d],searcher:s}))}),u.length&&o.push({idx:l,item:a,matches:u})}),o}_findMatches({key:e,value:s,searcher:r}){if(!W(s))return[];let i=[];if(te(s))s.forEach(({v:o,i:a,n:l})=>{if(!W(o))return;const{isMatch:u,score:f,indices:d}=r.searchIn(o);u&&i.push({score:f,key:e,value:o,idx:a,norm:l,indices:d})});else{const{v:o,n:a}=s,{isMatch:l,score:u,indices:f}=r.searchIn(o);l&&i.push({score:u,key:e,value:o,norm:a,indices:f})}return i}}oe.version="7.0.0";oe.createIndex=on;oe.parseIndex=os;oe.config=m;oe.parseQuery=un;Ss(As);const ws=n=>{const e=n.items.map(r=>{const{name:i,unit:o,slug:a,image:l,price:u}=r,{image_path:f}=l,{thumbnail:d}=f;return`<li class="pb-3 sm:pb-4">
                    <a href="/catalogo/${a}">
                        <div class="flex items-center space-x-4 rtl:space-x-reverse">
                            <div class="flex-shrink-0">
                                <img class="w-8 h-8 rounded-full" src="${d}" alt="Neil image">
                            </div>
                            <div class="flex-1 min-w-0">
                                <p class="text-sm font-medium text-gray-900 truncate dark:text-white">
                                    ${i}
                                </p>
                                <p class="text-sm text-gray-500 truncate dark:text-gray-400">
                                    ${o}
                                </p>
                            </div>
                            <div class="inline-flex items-center text-base font-semibold text-gray-900 dark:text-white">
                                $${u.toFixed(2)}
                            </div>
                        </div>
                    </a>
                </li> `}).join("");return n.categories.map(r=>{const{name:i,number_of_items:o}=r;return`<li class="pb-3 sm:pb-4">
                    <a href="/categorias/${i.toLowerCase()}/1">
                        <div class="flex items-center space-x-4 rtl:space-x-reverse">
                            <div class="flex-1 min-w-0">
                                <p class="text-md font-medium text-gray-900 truncate dark:text-white">
                                    ${i}
                                </p>
                            </div>
                            <div class="inline-flex items-center text-base font-semibold text-gray-900 dark:text-white">
                                ${o} <br/>
                                artículos
                            </div>
                        </div>
                    </a>
                </li> `}).join("")+e},Os=`
    <div class="flex item-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="text-gray-900 icon icon-tabler icon-tabler-loader-2 dark:text-white" width="24" height="24" viewBox="0 0 24 24" strokeWidth="2" stroke="currentColor" fill="none" strokeLinecap="round" strokeLinejoin="round" id="spinner">
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path d="M12 3a9 9 0 1 0 9 9" />
            <style>
                #spinner {
                    animation: spin 1s linear infinite;
                }
                @keyframes spin {
                    0% {
                        transform: rotate(0deg);
                    }
                    100% {
                        transform: rotate(360deg);
                    }
                }
            </style>
        </svg>
        <p class="text-gray-900 dark:text-white icon-tabler-loader-2 ml-2">Buscando...</p>
    </div>
`;document.addEventListener("astro:page-load",()=>{const n=document.getElementById("search"),e=document.getElementById("searchReadout"),s=document.getElementById("searchResults"),r=document.getElementById("resultsContainer");let i,o,a,l;const u={includeScore:!0,shouldSort:!0,keys:[{name:"name",weight:.7},{name:"category",weight:.5},{name:"unit",weight:.3}],threshold:.5},f={includeScore:!0,shouldSort:!0,keys:[{name:"name",weight:.5}],threshold:.5};function d(T){const y=new URL(window.location.href);y.searchParams.set("q",T),window.history.replaceState(null,"",y.toString())}async function g(T){if(T.length===0){s.innerHTML="",e.textContent="",r.classList.add("hidden");return}if(s.innerHTML=Os,r.classList.remove("hidden"),!i)try{const D=await fetch("/items.json");if(!D.ok)throw new Error("Something went wrong…please try again");const b=await D.json();i=b.items,o=b.categories}catch(D){console.error(D)}if(i&&!a&&(a=new oe(i,u),l=new oe(o,f)),!a)return;const y=a.search(T),k=l.search(T),$=y.map(D=>D.item),R=k.map(D=>D.item),q={items:$,categories:R};s.innerHTML=y.length>0?ws(q):"<li class='text-center text-gray-500 dark:text-gray-400'>No se encontraron resultados</li>"}function E(T){document.title=T?`Resultados de búsqueda para: ${T}`:"Búsqueda de productos"}function A(T){e.textContent=T?`Resultados de búsqueda para: ${T}`:"Busca productos"}function S(T){return localStorage.getItem("search")!==T?(localStorage.setItem("search",T),!0):!1}const I=localStorage.getItem("search");n.placeholder=I&&I!==""?I:"Busca por producto, categoría o marca",e.textContent=I?`Resultados de búsqueda para: ${I}`:"",window.addEventListener("DOMContentLoaded",()=>{const T=et.sanitize(new URLSearchParams(window.location.search).get("q"));E(T),A(T),n.value=T??""}),n.addEventListener("focus",()=>{const T=localStorage.getItem("search");if(T){n.value=T;const y=et.sanitize(n.value);E(y),A(y),g(y),d(y)}}),n.addEventListener("input",()=>{const T=et.sanitize(n.value),y=S(T);if(T.length===0){n.placeholder="Busca por producto, categoría o marca",e.textContent="Busca productos",s.innerHTML="",r.classList.add("hidden"),localStorage.removeItem("search");return}if(r.classList.remove("hidden"),!y)return;const k=T;E(k),A(k),g(k),d(k)})});
